{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { AdminMsgErrors } from '../dto/utils.dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../_services/user.service\";\n\nfunction HomeComponent_ul_11_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(message_r4);\n  }\n}\n\nfunction HomeComponent_ul_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, HomeComponent_ul_11_li_1_Template, 2, 1, \"li\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.errors.getErrors(ctx_r0.userName));\n  }\n}\n\nfunction HomeComponent_ul_15_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"El usuario o la contrase\\u00F1a no son v\\u00E1lidos.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_ul_15_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"La sesi\\u00F3n ha caducado.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_ul_15_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(message_r8);\n  }\n}\n\nfunction HomeComponent_ul_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, HomeComponent_ul_15_li_1_Template, 2, 0, \"li\", 9);\n    i0.ɵɵtemplate(2, HomeComponent_ul_15_li_2_Template, 2, 0, \"li\", 9);\n    i0.ɵɵtemplate(3, HomeComponent_ul_15_li_3_Template, 2, 1, \"li\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loginValid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.sessionValid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.errors.getErrors(ctx_r1.password));\n  }\n}\n\nfunction HomeComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(router, userService) {\n      this.router = router;\n      this.userService = userService;\n      this.user = {\n        id: 0,\n        userName: '',\n        password: ''\n      };\n      this.sessionValid = true;\n      this.loginValid = true;\n      this.canva = true;\n      this.errors = new AdminMsgErrors();\n    }\n\n    ngOnInit() {\n      this.form = new FormGroup({\n        userName: new FormControl(this.user.userName, Validators.required),\n        password: new FormControl(this.user.password, Validators.required)\n      });\n\n      switch (localStorage.getItem('SESSL')) {\n        case '0':\n          this.sessionValid = false;\n          localStorage.removeItem('SESSL');\n          localStorage.removeItem('SESST');\n          break;\n\n        case '1':\n          this.router.navigateByUrl('modules');\n          break;\n      }\n\n      this.canva = false;\n    }\n\n    get userName() {\n      return this.form.get('userName');\n    }\n\n    get password() {\n      return this.form.get('password');\n    }\n\n    validateUser() {\n      this.form.markAllAsTouched();\n\n      if (this.form.status == 'VALID') {\n        this.canva = true;\n        this.user = this.errors.mapping(this.user, this.form);\n        this.userService.loginEndpoint(this.user).subscribe(response => {\n          if (response) {\n            this.loginValid = true;\n            this.userService.createSessionEndpoint(this.user).subscribe(session => {\n              console.log(session);\n\n              if (session != null && session.token != '') {\n                localStorage.setItem('SESSL', '1');\n                localStorage.setItem('SESST', session.token);\n                this.router.navigateByUrl('modules');\n              } else {\n                localStorage.setItem('SESSL', '0');\n                localStorage.removeItem('SESST');\n                this.sessionValid = false;\n                this.canva = false;\n              }\n            });\n          } else this.loginValid = false;\n        });\n      }\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 24,\n    vars: 4,\n    consts: [[1, \"login\"], [1, \"login__logo\"], [\"src\", \"../../assets/asecofin_logo.png\", \"alt\", \"Asecofin Logo\"], [1, \"login__form\"], [1, \"login__form--title\"], [1, \"login__form--info\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"information__item\"], [\"type\", \"text\", \"formControlName\", \"userName\", \"placeholder\", \"Usuario\", \"name\", \"userName\"], [4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Contrase\\u00F1a\"], [1, \"information__btn\"], [\"type\", \"submit\"], [\"href\", \"#\"], [1, \"login__form--tiindux\"], [\"src\", \"../../assets/tiindux_logo.png\", \"alt\", \"Tiindux Logo\"], [\"class\", \"canva\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"canva\"], [\"src\", \"../../assets/load.gif\", \"alt\", \"Cargando\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵtext(5, \"\\u00A1Bienvenido!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"form\", 6);\n        i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_7_listener() {\n          return ctx.validateUser();\n        });\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"div\");\n        i0.ɵɵelement(10, \"input\", 8);\n        i0.ɵɵtemplate(11, HomeComponent_ul_11_Template, 2, 1, \"ul\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelementStart(13, \"div\");\n        i0.ɵɵelement(14, \"input\", 10);\n        i0.ɵɵtemplate(15, HomeComponent_ul_15_Template, 4, 3, \"ul\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 11);\n        i0.ɵɵelementStart(17, \"button\", 12);\n        i0.ɵɵtext(18, \"Ingresar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"a\", 13);\n        i0.ɵɵtext(20, \"\\u00BFOlvidaste la contrase\\u00F1a?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 14);\n        i0.ɵɵelement(22, \"img\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, HomeComponent_div_23_Template, 2, 0, \"div\", 16);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.errors.validate(ctx.userName));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loginValid || !ctx.sessionValid || ctx.errors.validate(ctx.password));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.canva);\n      }\n    },\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Montserrat&family=Roboto&display=swap\\\";@import\\\"https://fonts.googleapis.com/css2?family=Montserrat&family=Questrial&family=Roboto&display=swap\\\";.login[_ngcontent-%COMP%]{background-color:#e8eaea;background-image:url(back.785e881526af31bd1cd2.png);background-repeat:initial;background-size:cover;width:100%;height:100%;background-attachment:fixed}@media only screen and (max-width: 600px){.login[_ngcontent-%COMP%]{width:100%!important;transition:width 2s}}.login__logo[_ngcontent-%COMP%]{width:25vw;position:absolute;top:4%;background-color:#1164ba}@media only screen and (max-width: 600px){.login__logo[_ngcontent-%COMP%]{width:100vw;z-index:100;transition:width 2s}}.login__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vw;margin-top:3%;margin-bottom:2%;margin-left:5%}@media only screen and (max-width: 600px){.login__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50vw;z-index:100;transition:width 2s}}.login__form[_ngcontent-%COMP%]{width:35%;height:100%;position:absolute;right:0;background-color:#1164bacc}@media only screen and (max-width: 600px){.login__form[_ngcontent-%COMP%]{width:100%!important;transition:width 2s}}.login__form--title[_ngcontent-%COMP%]{width:100%;text-align:center;color:#f0f0f0;font-family:\\\"Poppins\\\";font-size:3.5rem;text-transform:uppercase;font-weight:bold;padding-top:30%}.login__form--info[_ngcontent-%COMP%]{padding-top:10%}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;align-items:center;justify-items:center}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__item[_ngcontent-%COMP%]{width:60%;margin-bottom:2.5rem;padding-left:0;padding-right:0}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:2rem;height:5rem;padding-left:1rem;padding-right:1rem}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__btn[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;align-items:center;justify-items:center}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:70%;margin-top:3rem;margin-bottom:10%}.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:200;font-size:2rem;text-decoration:underline;color:#f0f0f0;text-align:center!important;padding:2rem}@media only screen and (max-width: 600px){.login__form--info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .information__btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:2rem;text-align:center!important;transition:width 2s}}.login__form--tiindux[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;position:absolute;bottom:5%;width:100%}.login__form--tiindux[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15vw;transition:width 2s}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}